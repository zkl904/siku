<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css" media="screen">
		

	</style>
	<link rel="stylesheet" type="text/css" href="public/zucecss.css"/>
	<link rel="stylesheet" type="text/css" href="public/scss/zhucedenglu/zucechenggong.css">
	
</head>
<body>
	<!-- 公用的头部 -->
	<div id="topheader">
		
	</div>

	
	<div class="main">
		<div class="mainheader">
			<div class="headert">恭喜你，注册成功</div>
			<div class="headerb">完善资料，可以快速找到你喜欢的商品</div>
		</div>
		<div class="maincenter">
		<div class="mainleft">
			<p>
			<span>性别</span>
			男：<input type="radio" name="sex">
			女：<input type="radio" name="sex" id="nv">
			</p>
			<p class="p2">
				<span>生日：</span>
				<select name="" id="" class="year" >
					<option style="display: none" value="" >请选择</option>
					<option value="1">1991</option>
					<option value="1">1992</option>
					<option value="1">1993</option>
					<option value="1">1994</option>
					<option value="1">1995</option>
					<option value="1">1996</option>
					<option value="1">1997</option>
					<option value="1">1998</option>
					<option value="1">1999</option>
				</select>年
				<select name="" id="" class="month" >
					<option style="display: none" value=""  >请选择</option>
			    		<option value="1"> 1 </option>
					<option value="1"> 2 </option>
					<option value="1"> 3 </option>
					<option value="1"> 4 </option>
					<option value="1"> 5 </option>
					<option value="1"> 6 </option>
					<option value="1"> 7 </option>
					<option value="1"> 8 </option>
					<option value="1"> 9 </option>
					<option value="1"> 10 </option>
					<option value="1"> 11 </option>
					<option value="1"> 12 </option>
				</select>月
				<select name="" id="" class="date" >
					<option style="display: none" value="">请选择</option>
						<option value="1">1</option>
						<option value="1">2</option>
						<option value="1">3</option>
						<option value="1">4</option>
						<option value="1">5</option>
						<option value="1">6</option>
						<option value="1">7</option>
						<option value="1">8</option>
						<option value="1">9</option>
						<option value="1">10</option>
						<option value="1">11</option>
						<option value="1">12</option>
						<option value="1">13</option>
						<option value="1">14</option>
						<option value="1">15</option>
						<option value="1">16</option>
						<option value="1">17</option>
						<option value="1">18</option>
						<option value="1">19</option>
						<option value="1">20</option>
						<option value="1">21</option>
						<option value="1">22</option>
						<option value="1">23</option>
						<option value="1">24</option>
						<option value="1">25</option>
						<option value="1">26</option>
						<option value="1">27</option>
						<option value="1">28</option>
						<option value="1">29</option>
						<option value="1">30</option>
				</select>日
			</p>
			<p class="p3">
				<span>所在地：</span>
				<select name="" id="prov" >
					<option style="display: none" value="">请选择</option>
				</select>
				<select name="" id="city">
					<option style="display: none" value="">请选择</option>
				</select>
				<select name="" id="country">
					<option style="display: none" value="">请选择</option>
				</select>
			</p>
		</div>
		<div class="mainright">
			<ul>
				<li>首饰</li>
				<li>包装</li>
				<li>腕表</li>
				<li>豪车</li>
				<li>服装</li>
				<li>配饰</li>
				<li>金银首饰</li>
				<li>母婴玩具</li>
				<li>美容护肤</li>
				<li>户外运动</li>
				<li>不动产</li>
				<li>飞机</li>
				<li>家具</li>
				<li>工艺品</li>
				<li>艺术品</li>
			</ul>
		</div>
	</div>
	</div>
	<div class="footer"><input type="button" value="提交" id="submit"></div>

</body>
</html>
<script src = "cookie.js"></script>
<script src ="jquery-1.11.1.min.js"></script>
<script >
	//$( "body" ).css({ "background" : "red" });
	$("#topheader").load( "public/zucepb.html #header"  );
	//$("#publiheader").load( "public/zucepb.html #header" )
	//$(".footercontainer").load( "public/zucepb.html .footer" );

	var provArr=[ "浙江","安徽","江苏"  ];
	var cityArr=[[ "杭州","宁波"],["合肥" ],["南京","苏州"] ];
	var countryArr=[  [  ["上城区","余杭区","富阳区"],["海曙区","鄞州区"] ] , [ ["庐阳区","包河"] ], [ ["六城区","白下"],["姑苏","吴中"]  ]];

	$(function(){
		for( var i=0;i<provArr.length;i++ ){
			$( "#prov" ).append( `<option value="${i}"> ${provArr[i]} </option >` );
		}
	})
	$("#prov").change( function(){
		$("#city")[0].length = 1;
		var index = $(this).val();
		if( index=="" ){
			return;
		}
		var _cityArr = cityArr[ index ];
		for( var i = 0 ; i< _cityArr.length ;i++ ){
			$("#city").append(  `<option value="${  index }_${i}">${ _cityArr[i] } </option>` )
			
		}
	} )
	$("#city").change(  function(){
		$("#country")[0].length = 1;
		var str = $(this).val();
		if( str=='' ){
			return;
		}
		var provindex = str.split( "_" )[0];
		var cityindex = str.split("_")[1];
		var _countryArr = countryArr[provindex][cityindex];
		for( var i = 0 ;i< _countryArr.length ;i++ ){
			$("#country").append(  `<option >  ${_countryArr[i]} </option>` );
		}
	} )

	//  正则验证
	var flagRadio = null;
	 var  flagSelect=null;
	 var sexname="女";
	function sex(){
	$("input[name=sex]").each(  function( index ){
		if( $( "input[name=sex]" ).eq( index ).prop( "checked" )==true){
			if( $("#nv").prop( "checked" ) ){
				sexname="女";
			}
			else{
				sexname ="男";
			}
			flagRadio=true;
		}
	} )
	$("select").each( function( index ){
		if( $("select").eq(index).val()==""  ){
			flagSelect=false;
			return false;
		}
		flagSelect=true;
		//console.log( $("select").eq(index).val()=="" );
	} )
	}

	$("#submit").click( function(){
		sex();
		if( flagRadio && flagSelect ){
			var f= confirm( "确定提交了吗" );
			if( f ){
			var arr =[];
			var newuesrArr=[];
			var cookieuser= getCookie( "userimformation");
			var cookieInfo = getCookie( "imformation" );
			arr =cookieInfo;
			newuesrArr=cookieuser;
			var _json={
				name : newuesrArr[0].name,
				pwd : newuesrArr[0].pwd,
				sex : sexname,
				birthday: `${ $(".year option:selected").html() }年${ $(".month option:selected").html()  }月${ $(".date option:selected").html()  }日` ,
				location :`${ $("#prov option:selected").html() }省${  $("#city option:selected").html()  }市${  $("#country option:selected").html() }`,
				dlsuccess : null,
			}
			for( var i = 0;i< arr.length ;i++ ){
				if( _json.name == arr[i].name  ){
					arr[i].sex =_json.sex;
					arr[i].birthday = _json.birthday;
					arr[i].location = _json.location;
				}
			} 
			newuesrArr=[]; // 清空一下  他里面只存一个值  当前用户值
			newuesrArr.push(  _json  );
			setCookie( "imformation" , JSON.stringify( arr ) );
			setCookie(  "userimformation" ,JSON.stringify( newuesrArr ) );
			location.href="denglu.html";
			console.log( newuesrArr  );
			console.log( arr );
		}
		}
	} )



</script>
	




